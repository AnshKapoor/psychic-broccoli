input:
  csv_glob: "data/merged/matched_trajs_*.csv"
  parse_dates: ["timestamp", "firstseen", "lastseen"]
  timezone: "UTC"

coordinates:
  use_utm: true
  utm_crs: "epsg:32632"

segmentation:
  time_gap_sec: 180
  distance_jump_m: 600
  min_points_per_flight: 10
  split_on_identity: true

flows:
  flow_keys: ["Runway"]
  include:
    - ["27R"]
    - ["27L"]
    - ["09R"]
    - ["09L"]
    - ["HEL"]

preprocessing:
  # Filter points by already-computed `dist_to_airport_m` so you can generate
  # different preprocessed CSVs (e.g., 12km vs 20km) from the same matched CSVs.
  filter:
    max_airport_distance_km: 25
    min_length_km: 9.35
    allowed_runways: ["27R", "27L", "09R", "09L"]
    simplify:
      rdp_enabled: false
      rdp_epsilon_m: 50
      rdp_min_points: 10
  smoothing:
    enabled: true
    method: "auto"  # options: auto/savgol, moving_average, median, ewm, none
    window_length: 7
    polyorder: 2
    columns: ["latitude", "longitude", "altitude"]
  resampling:
    n_points: 80
    method: "time"

clustering:
  method: "optics"
  distance_metric: "euclidean"  # options: euclidean, dtw, frechet (dtw/frechet use precomputed distances)
  optics:
    min_samples: 10
    xi: 0.04
    min_cluster_size: 0.03
  kmeans:
    n_clusters: 4
  random_state: 42

backbone:
  percentiles: [10, 50, 90]
  min_flights_per_cluster: 5

testing:
  enabled: true
  max_rows_total: 50000
  max_flights_per_flow: 20
  sample_flows_only: true
  max_clusters_per_flow: 3

output:
  dir: "output"
  experiment_name: "OPTICS_exp_1"
  save_preprocessed: true
  save_flight_metadata: true
  save_backbones: true
  save_plots: false

logging:
  dir: "logs"
  filename: "backbone.log"
  level: "INFO"
